<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Microservices Architecture Scene</title>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-event-set-component@5.0.0/dist/aframe-event-set-component.min.js"></script>
    <script>
      AFRAME.registerComponent('open-article', {
        init: function () {
          this.el.addEventListener('click', function () {
            window.open('https://dev.to/charity_everett/introduction-to-microservices-architecture-with-docker-and-kubernetes-3el8', '_blank');
          });
        }
      });

      AFRAME.registerComponent('service-interaction', {
        init: function () {
          this.el.addEventListener('click', function () {
            console.log('Service clicked:', this.id);
          });
        }
      });
    </script>
  </head>
  <body>
    <a-scene>
      <a-assets>
        <img id="article-preview" crossorigin="anonymous" src="https://cdn.glitch.global/5cfc02c2-e08f-4e29-9383-05c3fa57335f/MicroservicesPage.png?v=1729025756305">
        <img id="sky" crossorigin="anonymous" src="https://cdn.glitch.global/5cfc02c2-e08f-4e29-9383-05c3fa57335f/Microservice%20Skybox.png?v=1729023719252">
      </a-assets>

      <!-- Environment -->
      <a-sky src="#sky"></a-sky>
      
      <!-- Article Screen -->
      <a-plane position="6 1.6 -2" rotation="0 -60 0" width="6" height="4.5" color="#CCC">
        <a-plane position="0 0 0.01" width="5.8" height="4.3" src="#article-preview" open-article></a-plane>
        <a-text value="Click to read full article" align="center" position="0 -2.4 0.1" width="6" color="#000"></a-text>
      </a-plane>
      
     <!-- Microservices Visualization -->
<a-entity position="0 2.6 -3">
  
  <!-- Client -->
  <a-box position="0 2 0" depth="0.5" height="0.5" width="2" color="red" service-interaction="name: client"></a-box>
  <a-text value="Client" position="0 2.5 0" align="center"></a-text>

  <!-- API Gateway -->
  <a-box position="0 1 0" depth="0.5" height="0.5" width="2" color="blue" service-interaction="name: api-gateway"></a-box>
  <a-text value="API Gateway" position="0 1.5 0" align="center"></a-text>

  <!-- Services Row -->
  <a-box position="-1.5 0 0" depth="0.5" height="0.5" width="0.5" color="green" service-interaction="name: auth-service"></a-box>
  <a-text value="Auth Service" position="-1.5 0.5 0" align="center" width="2"></a-text>

  <a-box position="-0.5 0 0" depth="0.5" height="0.5" width="0.5" color="yellow" service-interaction="name: user-service"></a-box>
  <a-text value="User Service" position="-0.5 0.5 0" align="center" width="2"></a-text>

  <a-box position="0.5 0 0" depth="0.5" height="0.5" width="0.5" color="purple" service-interaction="name: product-service"></a-box>
  <a-text value="Product Service" position="0.5 0.5 0" align="center" width="2"></a-text>

  <a-box position="1.5 0 0" depth="0.5" height="0.5" width="0.5" color="orange" service-interaction="name: order-service"></a-box>
  <a-text value="Order Service" position="1.5 0.5 0" align="center" width="2"></a-text>

  <!-- Payment Services -->
  <a-box position="1 -1 0" depth="0.5" height="0.5" width="0.5" color="pink" service-interaction="name: payment-service"></a-box>
  <a-text value="Payment Service" position="1 -0.5 0" align="center" width="2"></a-text>

  <a-box position="2 -1 0" depth="0.5" height="0.5" width="0.5" color="cyan" service-interaction="name: external-payment"></a-box>
  <a-text value="External Payment Provider" position="2 -0.5 0" align="center" width="2"></a-text>

  <!-- Databases -->
  <a-cylinder position="-1.5 -1 0" radius="0.25" height="0.5" color="lightgray" service-interaction="name: user-db"></a-cylinder>
  <a-text value="User Database" position="-1.5 -0.5 0" align="center" width="2"></a-text>

  <a-cylinder position="-0.5 -1 0" radius="0.25" height="0.5" color="lightgray" service-interaction="name: product-db"></a-cylinder>
  <a-text value="Product Database" position="-0.5 -0.5 0" align="center" width="2"></a-text>

  <a-cylinder position="0.5 -1 0" radius="0.25" height="0.5" color="lightgray" service-interaction="name: order-db"></a-cylinder>
  <a-text value="Order Database" position="0.5 -0.5 0" align="center" width="2"></a-text>

  <!-- Add connections between services here -->
</a-entity>

        <!-- Add connections between services here -->
      </a-entity>

      <!-- Camera -->
      <a-entity position="0 0.8 0">
        <a-camera>
          <a-cursor></a-cursor>
        </a-camera>
      </a-entity>
    </a-scene>
  </body>
</html>
