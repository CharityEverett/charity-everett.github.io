<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Microservices Architecture Scene</title>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-event-set-component@5.0.0/dist/aframe-event-set-component.min.js"></script>
    <script>
        AFRAME.registerComponent('start-button', {
            init: function () {
                var el = this.el;
                el.addEventListener('click', function () {
                    var visualization = document.querySelector('[microservices-visualization]');
                    visualization.components['microservices-visualization'].startVisualization();
                });
            }
        });

        AFRAME.registerComponent('pause-button', {
            init: function () {
                var el = this.el;
                el.addEventListener('click', function () {
                    var visualization = document.querySelector('[microservices-visualization]');
                    visualization.components['microservices-visualization'].pauseVisualization();
                });
            }
        });

        AFRAME.registerComponent('open-article', {
            init: function () {
                var el = this.el;
                el.addEventListener('click', function () {
                    window.open('https://dev.to/charity_everett/introduction-to-microservices-architecture-with-docker-and-kubernetes-3el8', '_blank');
                });
            }
        });

        AFRAME.registerComponent('service-interaction', {
            init: function () {
                var el = this.el;
                el.addEventListener('click', function () {
                    console.log('Service clicked:', el.id);
                    // Add more interaction logic here
                });
            }
        });

        AFRAME.registerComponent('microservices-visualization', {
            init: function () {
                this.services = [
                    { id: 'frontend', position: '0 2 -5' },
                    { id: 'backend', position: '-2 0 -5' },
                    { id: 'database', position: '2 0 -5' }
                ];
                this.createServices();
            },
            createServices: function () {
                var sceneEl = document.querySelector('a-scene');
                this.services.forEach(function (service) {
                    var entityEl = document.createElement('a-entity');
                    entityEl.setAttribute('id', service.id);
                    entityEl.setAttribute('position', service.position);
                    entityEl.setAttribute('geometry', 'primitive: box');
                    entityEl.setAttribute('material', 'color: #4CC3D9');
                    entityEl.setAttribute('service-interaction', '');
                    sceneEl.appendChild(entityEl);
                });
            },
            startVisualization: function () {
                console.log('Visualization started');
                // Add animation logic here
            },
            pauseVisualization: function () {
                console.log('Visualization paused');
                // Add pause logic here
            }
        });
    </script>
</head>
<body>
    <a-scene>
        <a-assets>
            <!-- Add any assets (images, models) here -->
        </a-assets>

        <a-entity microservices-visualization></a-entity>

        <a-entity id="startButton" start-button position="-1 0 -3" geometry="primitive: box" material="color: green" text="value: Start; align: center"></a-entity>
        <a-entity id="pauseButton" pause-button position="1 0 -3" geometry="primitive: box" material="color: red" text="value: Pause; align: center"></a-entity>
        <a-entity id="articleLink" open-article position="0 2 -3" geometry="primitive: plane" material="color: blue" text="value: Open Article; align: center"></a-entity>

        <a-camera position="0 1.6 0">
            <a-cursor></a-cursor>
        </a-camera>

        <a-sky color="#ECECEC"></a-sky>
    </a-scene>
</body>
</html>
