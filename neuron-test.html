<!DOCTYPE html>
<html>
  <head>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script>
      AFRAME.registerComponent('bipolar-neuron', {
        init: function() {
          this.createSoma();
          this.createDendrite();
          this.createAxon();
        },
        
        createSoma: function() {
          const soma = document.createElement('a-sphere');
          soma.setAttribute('radius', '0.3');
          soma.setAttribute('color', '#88ccff');
          soma.setAttribute('material', 'roughness: 0.8; metalness: 0.2');
          soma.setAttribute('animation', 'property: scale; to: 1.05 1.05 1.05; dir: alternate; dur: 2000; loop: true');
          this.el.appendChild(soma);
        },
        
        createDendrite: function() {
          const dendrite = document.createElement('a-entity');
          dendrite.setAttribute('line', {
            start: {x: 0, y: 0, z: 0},
            end: {x: 0, y: 1.5, z: 0},
            color: '#66aadd',
            opacity: 0.9,
            width: 0.02
          });
          
          // Add dendritic branches
          for (let i = 0; i < 10; i++) {
            const branch = document.createElement('a-entity');
            const end = {
              x: (Math.random() - 0.5) * 0.5,
              y: 1 + Math.random() * 0.5,
              z: (Math.random() - 0.5) * 0.5
            };
            branch.setAttribute('line', {
              start: {x: 0, y: 1, z: 0},
              end: end,
              color: '#66aadd',
              opacity: 0.75,
              width: 0.01
            });
            dendrite.appendChild(branch);
          }
          
          this.el.appendChild(dendrite);
        },
        
        createAxon: function() {
          const axon = document.createElement('a-entity');
          axon.setAttribute('line', {
            start: {x: 0, y: 0, z: 0},
            end: {x: 0, y: -1.5, z: 0},
            color: '#5599cc',
            opacity: 0.9,
            width: 0.02
          });
          
          // Add axon terminals
          for (let i = 0; i < 5; i++) {
            const terminal = document.createElement('a-sphere');
            const pos = {
              x: (Math.random() - 0.5) * 0.3,
              y: -1.5 - Math.random() * 0.2,
              z: (Math.random() - 0.5) * 0.3
            };
            terminal.setAttribute('radius', '0.03');
            terminal.setAttribute('position', `${pos.x} ${pos.y} ${pos.z}`);
            terminal.setAttribute('color', '#3377aa');
            terminal.setAttribute('animation', 'property: scale; to: 1.2 1.2 1.2; dir: alternate; dur: 1500; loop: true');
            axon.appendChild(terminal);
          }
          
          this.el.appendChild(axon);
        }
      });
    </script>
  </head>
  <body>
    <a-scene>
      <a-entity id="bipolar-neuron" bipolar-neuron position="0 0 -3" scale="1.5 1.5 1.5"></a-entity>
      
      <a-camera position="0 0 0"></a-camera>
      
      <a-sky color="#001133"></a-sky>
      <a-light type="ambient" intensity="0.5"></a-light>
      <a-light type="directional" position="1 1 1" intensity="0.8"></a-light>
    </a-scene>
  </body>
</html>
